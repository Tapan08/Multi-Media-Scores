<div class="container-fluid p-3">
    <h1>{{ action }} a Review</h1>

    <form class="p-2 d-flex justify-content-center flex-column " [formGroup]="addReviewForm" (ngSubmit)="onSubmit()">
        <label for="title">Title: </label>
        <input class="form-control" id="title" type="text" formControlName="title">
        @if(addReviewForm.get('title')?.invalid && (addReviewForm.get('title')?.dirty || addReviewForm.get('title')?.touched)){
            <p class="error-message text-danger">Please enter a valid Title.</p>
        }

        <label for="year">Year: </label>
        <input class="form-control" id="year" type="text" formControlName="year">
        @if(addReviewForm.get('year')?.invalid && (addReviewForm.get('year')?.dirty || addReviewForm.get('year')?.touched)){
            <p class="error-message text-danger">Please enter a valid year.</p>
        }

        <label for="category">Category: </label>
        <select class="form-control" id="name" type="text" formControlName="category">
            @for(category of categories; track category.id){
                <option [value]="category.id">{{ category.name }}</option>
            }
        </select>
        @if(addReviewForm.get('category')?.invalid && (addReviewForm.get('category')?.dirty || addReviewForm.get('category')?.touched)){
            <p class="error-message text-danger">Please enter a valid category.</p>
        }

        <label for="name">Rating (1-5): </label>
        <input class="form-control" id="rating" type="text" formControlName="rating">
        @if(addReviewForm.get('rating')?.invalid && (addReviewForm.get('rating')?.dirty || addReviewForm.get('rating')?.touched)){
            <p class="error-message text-danger">Please enter a valid rating.</p>
        }

        

        <label for="comment">Comment: </label>
        <textarea class="form-control" id="comment" formControlName="comment" rows="6"></textarea>
        @if(addReviewForm.get('comment')?.invalid && (addReviewForm.get('comment')?.dirty || addReviewForm.get('comment')?.touched)){
            <p class="error-message text-danger">Please enter a valid comment.</p>
        }

        <button class="mt-5 btn btn-warning" type="submit">{{ action }} Review</button>
        @if (action == "Edit"){
            <button class="mt-3 btn btn-danger" type="button" (click)="deleteReview()">Delete Review</button>
        }
        <button class="mt-3 btn btn-outline-warning" type="button" routerLink="/reviews">Cancel</button>
    </form>
</div>